# =============================================================================
# InsightFinder MCP Server Configuration
# =============================================================================
# Copy this file to .env and update the values for your deployment
# Different sections are provided for different deployment scenarios

# =============================================================================
# REQUIRED: InsightFinder API Configuration
# =============================================================================
INSIGHTFINDER_API_URL=https://app.insightfinder.com
INSIGHTFINDER_LICENSE_KEY=your_license_key_here
INSIGHTFINDER_SYSTEM_NAME=your_system_name_here  
INSIGHTFINDER_USER_NAME=your_username_here

# =============================================================================
# TRANSPORT CONFIGURATION
# =============================================================================
# Transport type: stdio (for MCP clients) or http (for REST API)
TRANSPORT_TYPE=http

# HTTP Server Configuration (only used when TRANSPORT_TYPE=http)
SERVER_HOST=0.0.0.0         # Use 127.0.0.1 for local/proxy-only access
SERVER_PORT=8000

# =============================================================================
# PROXY CONFIGURATION (for HTTPS with nginx)
# =============================================================================
# Enable these settings when running behind nginx or other reverse proxy
BEHIND_PROXY=false
TRUST_PROXY_HEADERS=false
ALLOWED_HOSTS=localhost,127.0.0.1  # Add your domain: your-domain.com,localhost,127.0.0.1

# =============================================================================
# HTTP AUTHENTICATION (only for HTTP transport)
# =============================================================================
HTTP_AUTH_ENABLED=true
HTTP_AUTH_METHOD=api_key    # Options: api_key, bearer, basic

# API Key Authentication (recommended for production)
HTTP_API_KEY=your_secure_api_key_here

# Bearer Token Authentication (alternative)
# HTTP_BEARER_TOKEN=your_secure_bearer_token_here

# Basic Authentication (alternative)
# HTTP_BASIC_USERNAME=admin
# HTTP_BASIC_PASSWORD=your_secure_password_here

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Rate Limiting
HTTP_RATE_LIMIT_ENABLED=true
MAX_REQUESTS_PER_MINUTE=60

# Request Size Limiting
MAX_PAYLOAD_SIZE=1048576    # 1MB in bytes

# IP Access Control (optional)
# Comma-separated list of allowed IPs or CIDR blocks
# HTTP_IP_WHITELIST=192.168.1.0/24,10.0.0.100

# =============================================================================
# CORS CONFIGURATION (for web clients)
# =============================================================================
HTTP_CORS_ENABLED=false
HTTP_CORS_ORIGINS=*         # Use specific origins in production: https://your-domain.com

# =============================================================================
# DEBUG CONFIGURATION
# =============================================================================
ENABLE_DEBUG_MESSAGES=false

# =============================================================================
# SSE STREAMING CONFIGURATION
# =============================================================================
# Enable Server-Sent Events streaming for real-time communication
# Set to false to disable SSE endpoints and use only traditional HTTP
SSE_ENABLED=true
# Heartbeat/ping interval in seconds to keep connections alive
# Lower values = more responsive but higher overhead (recommended: 10-60)
SSE_PING_INTERVAL=30
# Maximum number of concurrent SSE connections
# Adjust based on server resources (recommended: 100-1000)
SSE_MAX_CONNECTIONS=100
# Additional CORS headers for SSE streaming
# Required for browser-based SSE clients
SSE_CORS_HEADERS=Cache-Control,Content-Type
# Enable periodic heartbeat events to detect disconnected clients
# Recommended: true for production, can be false for development
SSE_HEARTBEAT_ENABLED=true

# =============================================================================
# DEPLOYMENT EXAMPLES
# =============================================================================
# Choose one of these example configurations and uncomment the relevant lines
# 
# SSE Streaming Endpoints (when SSE_ENABLED=true):
# - GET  /mcp/events              - SSE event stream
# - POST /mcp/stream              - Streaming MCP requests  
# - POST /tools/{name}/stream     - Stream individual tools
# - GET  /sse/connections         - Connection debug info

# --- EXAMPLE 1: MCP Client (stdio) ---
# TRANSPORT_TYPE=stdio
# INSIGHTFINDER_LICENSE_KEY=your_key
# INSIGHTFINDER_SYSTEM_NAME=your_system
# INSIGHTFINDER_USER_NAME=your_user

# --- EXAMPLE 2: Local HTTP API with SSE ---  
# TRANSPORT_TYPE=http
# SERVER_HOST=0.0.0.0
# SERVER_PORT=8000
# HTTP_AUTH_ENABLED=true
# HTTP_API_KEY=local-dev-key-123
# SSE_ENABLED=true
# SSE_HEARTBEAT_ENABLED=true
# SSE_PING_INTERVAL=10
# ENABLE_DEBUG_MESSAGES=true

# --- EXAMPLE 3: Production HTTPS with nginx and SSE ---
# TRANSPORT_TYPE=http
# SERVER_HOST=127.0.0.1
# SERVER_PORT=8000
# BEHIND_PROXY=true
# TRUST_PROXY_HEADERS=true  
# ALLOWED_HOSTS=your-domain.com,localhost,127.0.0.1
# HTTP_AUTH_ENABLED=true
# HTTP_API_KEY=prod-secure-key-xyz
# HTTP_RATE_LIMIT_ENABLED=true
# MAX_REQUESTS_PER_MINUTE=100
# HTTP_CORS_ENABLED=true
# HTTP_CORS_ORIGINS=https://your-domain.com
# SSE_ENABLED=true
# SSE_MAX_CONNECTIONS=1000
# SSE_PING_INTERVAL=30

# --- EXAMPLE 4: Local network testing with SSE ---
# TRANSPORT_TYPE=http
# SERVER_HOST=0.0.0.0
# SERVER_PORT=8000
# BEHIND_PROXY=false
# ALLOWED_HOSTS=192.168.1.100,localhost,127.0.0.1
# HTTP_AUTH_ENABLED=true
# HTTP_API_KEY=test-key-for-home-network
# HTTP_CORS_ENABLED=true
# HTTP_CORS_ORIGINS=*
# SSE_ENABLED=true
# SSE_HEARTBEAT_ENABLED=true
# SSE_PING_INTERVAL=10
# SSE_MAX_CONNECTIONS=50
# ENABLE_DEBUG_MESSAGES=true

# --- EXAMPLE 5: SSE Streaming Only (no REST API) ---
# TRANSPORT_TYPE=http
# SERVER_HOST=0.0.0.0
# SERVER_PORT=8000
# HTTP_AUTH_ENABLED=true
# HTTP_API_KEY=sse-streaming-key
# SSE_ENABLED=true
# SSE_HEARTBEAT_ENABLED=true
# SSE_PING_INTERVAL=15
# SSE_MAX_CONNECTIONS=200
# HTTP_CORS_ENABLED=true
# HTTP_CORS_ORIGINS=https://your-app.com,http://localhost:3000



